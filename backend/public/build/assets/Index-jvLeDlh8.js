import{a as k,b as u,j as e,r as p,L as _}from"./app-BC_BmfU5.js";import{A as S}from"./AdminLayout-B1bet8Xy.js";import{a as A}from"./adminPath-BxB_o4uP.js";/* empty css            */const C=[{key:"deposit",label:"Deposits"},{key:"withdrawal",label:"Withdrawals"}],g=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:2}).format(Number(s||0)),b=s=>s?new Date(s).toLocaleString():"-",o=s=>s&&s.length>12?`${s.slice(0,6)}...${s.slice(-4)}`:s||"-",$=s=>s&&s.length>20?`${s.slice(0,10)}...${s.slice(-8)}`:s||"-";function V({activeTab:s="deposit",transactions:l,stats:r}){const{url:h}=k(),n=Array.isArray(l?.data)?l.data:[],c=Array.isArray(l?.links)?l.links:[],[i,j]=u.useState(null),a=u.useMemo(()=>n.find(t=>t.id===i)||null,[n,i]),x=()=>j(null),f=t=>{t!==s&&p.get(A(h,"transactions"),{tab:t,page:1},{preserveState:!1,replace:!0})},N=()=>{a?.can_approve&&window.confirm(`Approve transaction ${o(a.id)}?`)&&p.post(a.approve_url,{},{preserveScroll:!0,onSuccess:x})},v=()=>{a?.can_decline&&window.confirm(`Decline transaction ${o(a.id)}?`)&&p.post(a.decline_url,{},{preserveScroll:!0,onSuccess:x})},w=()=>{a?.can_delete&&window.confirm(`Delete transaction ${o(a.id)}? This cannot be undone.`)&&p.delete(a.delete_url,{preserveScroll:!0,onSuccess:x})};return e.jsxs(S,{title:"Transactions",children:[e.jsxs("section",{className:"grid gap-3 sm:grid-cols-2 xl:grid-cols-4",children:[e.jsx(m,{label:"Total",value:r.total}),e.jsx(m,{label:"Pending",value:r.pending}),e.jsx(m,{label:"Approved",value:r.approved}),e.jsx(m,{label:"Rejected",value:r.rejected})]}),e.jsxs("section",{className:"mt-6 rounded-2xl border border-slate-800 bg-slate-900/70 p-4 sm:p-5",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"All Transactions"}),e.jsx("div",{className:"inline-flex rounded-xl border border-slate-700 bg-slate-950/70 p-1",children:C.map(t=>e.jsx("button",{type:"button",onClick:()=>f(t.key),className:`rounded-lg px-3 py-1.5 text-xs font-semibold uppercase tracking-wide transition sm:px-4 ${s===t.key?"bg-cyan-500/20 text-cyan-100":"text-slate-300 hover:bg-slate-800"}`,children:t.label},t.key))})]}),e.jsx("p",{className:"mt-2 text-xs text-slate-400",children:"Sorted by latest first"}),n.length===0?e.jsx("div",{className:"mt-4 rounded-xl border border-slate-800 bg-slate-950/60 px-4 py-6 text-sm text-slate-400",children:"No transactions found."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4 space-y-3 md:hidden",children:n.map(t=>e.jsxs("article",{className:"rounded-xl border border-slate-800 bg-slate-950/70 p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-100",children:t.user_name||"Unknown user"}),e.jsx("p",{className:"text-xs text-slate-500",children:t.user_email||"-"})]}),e.jsx(y,{value:t.status})]}),e.jsxs("dl",{className:"mt-3 space-y-1 text-xs text-slate-400",children:[e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsx("dt",{children:"ID"}),e.jsx("dd",{className:"font-mono text-slate-300",children:o(t.id)})]}),e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsx("dt",{children:"Type"}),e.jsx("dd",{className:"uppercase text-slate-200",children:t.type})]}),e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsx("dt",{children:"Currency"}),e.jsxs("dd",{className:"uppercase text-slate-200",children:[t.currency," ",t.network?`(${t.network})`:""]})]}),e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsx("dt",{children:"Amount"}),e.jsx("dd",{className:"text-slate-100",children:g(t.amount)})]}),e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsx("dt",{children:"Submitted"}),e.jsx("dd",{className:"text-slate-300",children:b(t.submitted_at||t.created_at)})]})]}),e.jsx("div",{className:"mt-3",children:e.jsx("button",{type:"button",onClick:()=>j(t.id),className:"rounded-lg border border-cyan-500/60 px-3 py-1.5 text-xs font-semibold text-cyan-200 transition hover:bg-cyan-500/10",children:"Action"})})]},t.id))}),e.jsx("div",{className:"mt-4 hidden overflow-x-auto md:block",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"text-xs uppercase tracking-wide text-slate-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"pb-3 pr-3",children:"User"}),e.jsx("th",{className:"pb-3 pr-3",children:"Type"}),e.jsx("th",{className:"pb-3 pr-3",children:"Currency / Network"}),e.jsx("th",{className:"pb-3 pr-3",children:"Amount"}),e.jsx("th",{className:"pb-3 pr-3",children:"Status"}),e.jsx("th",{className:"pb-3 pr-3",children:"Submitted"}),e.jsx("th",{className:"pb-3",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-800 text-slate-300",children:n.map(t=>e.jsxs("tr",{className:"transition hover:bg-slate-800/30",children:[e.jsxs("td",{className:"py-3 pr-3",children:[e.jsx("p",{className:"font-medium text-slate-100",children:t.user_name||"Unknown user"}),e.jsx("p",{className:"text-xs text-slate-500",children:t.user_email||"-"})]}),e.jsx("td",{className:"py-3 pr-3 uppercase",children:t.type}),e.jsxs("td",{className:"py-3 pr-3 uppercase",children:[t.currency," ",t.network?`(${t.network})`:""]}),e.jsx("td",{className:"py-3 pr-3",children:g(t.amount)}),e.jsx("td",{className:"py-3 pr-3",children:e.jsx(y,{value:t.status})}),e.jsx("td",{className:"py-3 pr-3 text-xs text-slate-400",children:b(t.submitted_at||t.created_at)}),e.jsx("td",{className:"py-3",children:e.jsx("button",{type:"button",onClick:()=>j(t.id),className:"rounded-lg border border-cyan-500/60 px-3 py-1.5 text-xs font-semibold text-cyan-200 transition hover:bg-cyan-500/10",children:"Action"})})]},t.id))})]})})]}),e.jsx(T,{links:c,className:"mt-5"})]}),e.jsx(D,{transaction:a,onClose:x,onApprove:N,onDecline:v,onDelete:w})]})}function m({label:s,value:l}){return e.jsxs("article",{className:"rounded-xl border border-slate-800 bg-slate-900/70 p-4",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:s}),e.jsx("p",{className:"mt-2 text-2xl font-semibold text-slate-100",children:l})]})}function y({value:s}){const l=s==="approved"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":s==="rejected"?"border-rose-500/40 bg-rose-500/10 text-rose-200":s==="processing"||s==="payment"||s==="input"||s==="pending"?"border-amber-500/40 bg-amber-500/10 text-amber-200":"border-slate-700 bg-slate-700/20 text-slate-200";return e.jsx("span",{className:`rounded-full border px-2 py-1 text-xs uppercase ${l}`,children:s})}function T({links:s,className:l}){return!s||s.length===0?null:e.jsx("div",{className:`${l} flex flex-wrap gap-2`,children:s.map(r=>e.jsx(_,{href:r.url||"#",preserveState:!0,preserveScroll:!0,className:`rounded-lg border px-3 py-1.5 text-xs transition ${r.active?"border-cyan-400 bg-cyan-500/20 text-cyan-100":r.url?"border-slate-700 text-slate-300 hover:border-cyan-500/40":"cursor-not-allowed border-slate-800 text-slate-600"}`,dangerouslySetInnerHTML:{__html:r.label}},r.label))})}function D({transaction:s,onClose:l,onApprove:r,onDecline:h,onDelete:n}){if(!s)return null;const[c,i]=u.useState(!1);return u.useEffect(()=>{i(!1)},[s.id]),e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-950/80 p-4",children:[e.jsx("button",{type:"button",className:"absolute inset-0",onClick:l,"aria-label":"Close action modal"}),e.jsxs("section",{className:"relative z-10 w-full max-w-xl rounded-2xl border border-slate-700 bg-slate-900 p-5 shadow-2xl",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-slate-100",children:"Transaction Action"}),e.jsx("p",{className:"text-xs text-slate-400",children:o(s.id)})]}),e.jsx("button",{type:"button",onClick:l,className:"rounded-lg border border-slate-700 px-2 py-1 text-xs text-slate-300 transition hover:bg-slate-800",children:"Close"})]}),e.jsxs("dl",{className:"mt-4 grid gap-2 text-sm text-slate-300 sm:grid-cols-2",children:[e.jsx(d,{label:"User",value:s.user_name||"Unknown user"}),e.jsx(d,{label:"Email",value:s.user_email||"-"}),e.jsx(d,{label:"Type",value:(s.type||"-").toUpperCase()}),e.jsx(d,{label:"Currency",value:`${s.currency||"-"}${s.network?` (${s.network})`:""}`}),e.jsx(d,{label:"Amount",value:g(s.amount)}),e.jsx(d,{label:"Status",value:(s.status||"-").toUpperCase()}),e.jsx(d,{label:"Tx Hash",value:$(s.transaction_hash)}),e.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/70 px-3 py-2 sm:col-span-2",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Destination"}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx("p",{className:"text-xs text-slate-200 break-all",children:s.destination||"-"}),s.destination?e.jsxs("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(s.destination),i(!0),window.setTimeout(()=>i(!1),1500)},className:`ml-auto inline-flex items-center gap-1 rounded-md border px-2 py-1 text-[11px] font-semibold transition ${c?"border-emerald-500/60 text-emerald-200":"border-slate-700 text-slate-200 hover:bg-slate-800"}`,children:[e.jsx("svg",{viewBox:"0 0 20 20",className:`h-4 w-4 ${c?"text-emerald-300":"text-slate-300"}`,"aria-hidden":"true",children:e.jsx("path",{fill:"currentColor",d:"M7 2a2 2 0 0 0-2 2v1H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7.414a2 2 0 0 0-.586-1.414l-2.414-2.414A2 2 0 0 0 10.586 3H10V4a2 2 0 0 1-2 2H7V4a2 2 0 0 0-2-2Zm3 5a1 1 0 0 0 1-1V4.414L13.586 7H10Zm-3 0h2v2a2 2 0 0 0 2 2h2v3a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h1v1a1 1 0 0 0 1 1Z"})}),c?"Copied":"Copy"]}):null]})]}),e.jsx(d,{label:"Submitted",value:b(s.submitted_at||s.created_at)}),e.jsx(d,{label:"Processed",value:b(s.processed_at)})]}),e.jsxs("div",{className:"mt-5 flex flex-wrap gap-2",children:[s.has_receipt?e.jsx("a",{href:s.receipt_url,target:"_blank",rel:"noreferrer",className:"rounded-lg bg-blue-600 px-3 py-1.5 text-xs font-semibold text-white transition hover:bg-blue-500",children:"View"}):e.jsx("span",{className:"rounded-lg border border-slate-700 px-3 py-1.5 text-xs text-slate-500",children:"No Receipt"}),e.jsx("button",{type:"button",onClick:r,disabled:!s.can_approve,className:"rounded-lg bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white transition hover:bg-emerald-500 disabled:cursor-not-allowed disabled:bg-slate-700 disabled:text-slate-400",children:"Approve"}),e.jsx("button",{type:"button",onClick:h,disabled:!s.can_decline,className:"rounded-lg bg-amber-500 px-3 py-1.5 text-xs font-semibold text-slate-950 transition hover:bg-amber-400 disabled:cursor-not-allowed disabled:bg-slate-700 disabled:text-slate-400",children:"Decline"}),e.jsx("button",{type:"button",onClick:n,disabled:!s.can_delete,className:"rounded-lg bg-rose-600 px-3 py-1.5 text-xs font-semibold text-white transition hover:bg-rose-500 disabled:cursor-not-allowed disabled:bg-slate-700 disabled:text-slate-400",children:"Delete"})]})]})]})}function d({label:s,value:l}){return e.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/70 px-3 py-2",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:s}),e.jsx("p",{className:"mt-1 text-xs text-slate-200",children:l})]})}export{V as default};
