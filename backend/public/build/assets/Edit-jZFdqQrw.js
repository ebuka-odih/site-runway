import{a as v,u as x,j as e,L as m}from"./app-CqtndHMG.js";import{A as _}from"./AdminLayout-d3DxvaIl.js";import{a as c}from"./adminPath-BxB_o4uP.js";/* empty css            */const f=s=>{if(!s)return"";const l=new Date(s);if(Number.isNaN(l.getTime()))return"";const n=d=>String(d).padStart(2,"0");return`${l.getFullYear()}-${n(l.getMonth()+1)}-${n(l.getDate())}T${n(l.getHours())}:${n(l.getMinutes())}`};function w({trader:s,assets:l,active_followers:n}){const{url:d}=v(),r=x({display_name:s.display_name||"",username:s.username||"",avatar_color:s.avatar_color||"",strategy:s.strategy||"",copy_fee:s.copy_fee??0,total_return:s.total_return??0,win_rate:s.win_rate??0,copiers_count:s.copiers_count??0,risk_score:s.risk_score??1,joined_at:f(s.joined_at),is_verified:!!s.is_verified,is_active:!!s.is_active}),u=l?.[0]??null,a=x({asset_id:u?.id||"",side:"buy",quantity:"",price:u?.price??"",executed_at:"",pnl:"",note:""}),g=t=>{t.preventDefault(),r.put(c(d,`copy-traders/${s.id}`))},b=t=>{t.preventDefault(),a.post(c(d,`copy-traders/${s.id}/trades`),{preserveScroll:!0,onSuccess:()=>{a.reset("quantity","pnl","note","executed_at")}})},j=t=>{a.setData("asset_id",t);const p=l.find(y=>y.id===t);p&&a.setData("price",p.price)};return e.jsx(_,{title:`Edit ${s.display_name}`,children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.2fr,0.8fr]",children:[e.jsxs("section",{className:"rounded-2xl border border-slate-800 bg-slate-900/70 p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-100",children:"Trader Details"}),e.jsx("p",{className:"mt-1 text-sm text-slate-400",children:"Update copy trader stats and profile info."})]}),e.jsx(m,{href:c(d,"copy-traders"),className:"rounded-xl border border-slate-700 px-4 py-2 text-xs text-slate-200 transition hover:border-slate-500 hover:bg-slate-800",children:"Back to list"})]}),e.jsxs("form",{onSubmit:g,className:"space-y-5",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx(i,{label:"Display Name",error:r.errors.display_name,required:!0,children:e.jsx("input",{type:"text",value:r.data.display_name,onChange:t=>r.setData("display_name",t.target.value),className:o(r.errors.display_name),required:!0})}),e.jsx(i,{label:"Username",error:r.errors.username,required:!0,children:e.jsx("input",{type:"text",value:r.data.username,onChange:t=>r.setData("username",t.target.value),className:o(r.errors.username),required:!0})}),e.jsx(i,{label:"Avatar Color",error:r.errors.avatar_color,children:e.jsx("input",{type:"text",value:r.data.avatar_color,onChange:t=>r.setData("avatar_color",t.target.value),className:o(r.errors.avatar_color),placeholder:"emerald"})}),e.jsx(i,{label:"Strategy",error:r.errors.strategy,required:!0,children:e.jsx("input",{type:"text",value:r.data.strategy,onChange:t=>r.setData("strategy",t.target.value),className:o(r.errors.strategy),required:!0})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx(i,{label:"Copy Fee ($)",error:r.errors.copy_fee,required:!0,children:e.jsx("input",{type:"number",step:"0.01",min:"0",value:r.data.copy_fee,onChange:t=>r.setData("copy_fee",t.target.value),className:o(r.errors.copy_fee),required:!0})}),e.jsx(i,{label:"Total Return (%)",error:r.errors.total_return,required:!0,children:e.jsx("input",{type:"number",step:"0.01",value:r.data.total_return,onChange:t=>r.setData("total_return",t.target.value),className:o(r.errors.total_return),required:!0})}),e.jsx(i,{label:"Win Rate (%)",error:r.errors.win_rate,required:!0,children:e.jsx("input",{type:"number",step:"0.01",value:r.data.win_rate,onChange:t=>r.setData("win_rate",t.target.value),className:o(r.errors.win_rate),required:!0})}),e.jsx(i,{label:"Copiers Count",error:r.errors.copiers_count,required:!0,children:e.jsx("input",{type:"number",step:"1",value:r.data.copiers_count,onChange:t=>r.setData("copiers_count",t.target.value),className:o(r.errors.copiers_count),required:!0})}),e.jsx(i,{label:"Risk Score (1-10)",error:r.errors.risk_score,required:!0,children:e.jsx("input",{type:"number",step:"1",min:"1",max:"10",value:r.data.risk_score,onChange:t=>r.setData("risk_score",t.target.value),className:o(r.errors.risk_score),required:!0})})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:e.jsx(i,{label:"Joined At",error:r.errors.joined_at,required:!0,children:e.jsx("input",{type:"datetime-local",value:r.data.joined_at,onChange:t=>r.setData("joined_at",t.target.value),className:o(r.errors.joined_at),required:!0})})}),e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsx(h,{label:"Verified",checked:r.data.is_verified,onChange:t=>r.setData("is_verified",t)}),e.jsx(h,{label:"Active",checked:r.data.is_active,onChange:t=>r.setData("is_active",t)})]}),(r.errors.is_verified||r.errors.is_active)&&e.jsx("p",{className:"text-xs text-rose-300",children:r.errors.is_verified||r.errors.is_active}),e.jsxs("div",{className:"flex flex-wrap gap-3 pt-2",children:[e.jsx("button",{type:"submit",disabled:r.processing,className:"rounded-xl bg-gradient-to-r from-cyan-500 to-emerald-500 px-5 py-2.5 text-sm font-semibold text-slate-950 transition hover:opacity-90 disabled:cursor-not-allowed disabled:opacity-60",children:r.processing?"Saving...":"Save Changes"}),e.jsx(m,{href:c(d,"copy-traders"),className:"rounded-xl border border-slate-700 px-5 py-2.5 text-sm text-slate-200 transition hover:border-slate-500 hover:bg-slate-800",children:"Cancel"})]})]})]}),e.jsxs("section",{className:"rounded-2xl border border-slate-800 bg-slate-900/70 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-100",children:"Execute Copy Trade"}),e.jsxs("p",{className:"mt-1 text-sm text-slate-400",children:["Applies the trade to ",n," active follower",n===1?"":"s",". Quantity and PnL scale by each follower's copy ratio."]})]}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsx(i,{label:"Asset",error:a.errors.asset_id,required:!0,children:e.jsxs("select",{value:a.data.asset_id,onChange:t=>j(t.target.value),className:o(a.errors.asset_id),required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Select an asset"}),l.map(t=>e.jsxs("option",{value:t.id,children:[t.symbol," Â· ",t.name]},t.id))]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx(i,{label:"Side",error:a.errors.side,required:!0,children:e.jsxs("select",{value:a.data.side,onChange:t=>a.setData("side",t.target.value),className:o(a.errors.side),required:!0,children:[e.jsx("option",{value:"buy",children:"Buy"}),e.jsx("option",{value:"sell",children:"Sell"})]})}),e.jsx(i,{label:"Quantity (Leader)",error:a.errors.quantity,required:!0,children:e.jsx("input",{type:"number",step:"0.00000001",value:a.data.quantity,onChange:t=>a.setData("quantity",t.target.value),className:o(a.errors.quantity),required:!0})}),e.jsx(i,{label:"Price",error:a.errors.price,required:!0,children:e.jsx("input",{type:"number",step:"0.0001",value:a.data.price,onChange:t=>a.setData("price",t.target.value),className:o(a.errors.price),required:!0})}),e.jsx(i,{label:"Executed At",error:a.errors.executed_at,children:e.jsx("input",{type:"datetime-local",value:a.data.executed_at,onChange:t=>a.setData("executed_at",t.target.value),className:o(a.errors.executed_at)})})]}),e.jsx(i,{label:"PnL (Leader Trade)",error:a.errors.pnl,children:e.jsx("input",{type:"number",step:"0.01",value:a.data.pnl,onChange:t=>a.setData("pnl",t.target.value),className:o(a.errors.pnl),placeholder:"Optional"})}),e.jsx(i,{label:"Internal Note",error:a.errors.note,children:e.jsx("input",{type:"text",value:a.data.note,onChange:t=>a.setData("note",t.target.value),className:o(a.errors.note),placeholder:"Optional note for the metadata"})}),e.jsx("button",{type:"submit",disabled:a.processing||n===0,className:"w-full rounded-xl bg-gradient-to-r from-emerald-500 to-cyan-500 px-5 py-2.5 text-sm font-semibold text-slate-950 transition hover:opacity-90 disabled:cursor-not-allowed disabled:opacity-60",children:a.processing?"Executing...":"Execute Trade"})]})]})]})})}function i({label:s,error:l,children:n,required:d=!1}){return e.jsxs("label",{className:"block",children:[e.jsxs("span",{className:"mb-2 block text-sm text-slate-300",children:[s," ",d?e.jsx("span",{className:"text-rose-300",children:"*"}):null]}),n,l&&e.jsx("span",{className:"mt-1 block text-xs text-rose-300",children:l})]})}function h({label:s,checked:l,onChange:n}){return e.jsxs("label",{className:"flex items-center justify-between rounded-xl border border-slate-700 bg-slate-950/70 px-4 py-3 text-sm text-slate-200",children:[e.jsx("span",{children:s}),e.jsx("button",{type:"button",onClick:()=>n(!l),className:`relative h-6 w-11 rounded-full transition ${l?"bg-emerald-500":"bg-slate-700"}`,children:e.jsx("span",{className:`absolute top-0.5 h-5 w-5 rounded-full bg-white transition ${l?"left-5":"left-0.5"}`})})]})}const o=s=>`w-full rounded-xl border px-3 py-2.5 text-sm outline-none transition ${s?"border-rose-500/60 bg-rose-500/10 text-rose-100 focus:border-rose-400":"border-slate-700 bg-slate-950 text-slate-100 focus:border-cyan-400"}`;export{w as default};
