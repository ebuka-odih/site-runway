import{r as j,j as e,a as x,L as v}from"./app-YfAYZqth.js";import{A as _}from"./AdminLayout-CltSBTod.js";/* empty css            */const k=[{key:"deposit",label:"Deposits"},{key:"withdrawal",label:"Withdrawals"}],b=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:2}).format(Number(s||0)),p=s=>s?new Date(s).toLocaleString():"-",c=s=>s&&s.length>12?`${s.slice(0,6)}...${s.slice(-4)}`:s||"-",S=s=>s&&s.length>20?`${s.slice(0,10)}...${s.slice(-8)}`:s||"-";function U({activeTab:s="deposit",transactions:l,stats:r}){const n=Array.isArray(l?.data)?l.data:[],m=Array.isArray(l?.links)?l.links:[],[h,u]=j.useState(null),a=j.useMemo(()=>n.find(t=>t.id===h)||null,[n,h]),i=()=>u(null),g=t=>{t!==s&&x.get("/admin/transactions",{tab:t,page:1},{preserveState:!1,replace:!0})},N=()=>{a?.can_approve&&window.confirm(`Approve transaction ${c(a.id)}?`)&&x.post(a.approve_url,{},{preserveScroll:!0,onSuccess:i})},f=()=>{a?.can_decline&&window.confirm(`Decline transaction ${c(a.id)}?`)&&x.post(a.decline_url,{},{preserveScroll:!0,onSuccess:i})},w=()=>{a?.can_delete&&window.confirm(`Delete transaction ${c(a.id)}? This cannot be undone.`)&&x.delete(a.delete_url,{preserveScroll:!0,onSuccess:i})};return e.jsxs(_,{title:"Transactions",children:[e.jsxs("section",{className:"grid gap-3 sm:grid-cols-2 xl:grid-cols-4",children:[e.jsx(o,{label:"Total",value:r.total}),e.jsx(o,{label:"Pending",value:r.pending}),e.jsx(o,{label:"Approved",value:r.approved}),e.jsx(o,{label:"Rejected",value:r.rejected})]}),e.jsxs("section",{className:"mt-6 rounded-2xl border border-slate-800 bg-slate-900/70 p-4 sm:p-5",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"All Transactions"}),e.jsx("div",{className:"inline-flex rounded-xl border border-slate-700 bg-slate-950/70 p-1",children:k.map(t=>e.jsx("button",{type:"button",onClick:()=>g(t.key),className:`rounded-lg px-3 py-1.5 text-xs font-semibold uppercase tracking-wide transition sm:px-4 ${s===t.key?"bg-cyan-500/20 text-cyan-100":"text-slate-300 hover:bg-slate-800"}`,children:t.label},t.key))})]}),e.jsx("p",{className:"mt-2 text-xs text-slate-400",children:"Sorted by latest first"}),n.length===0?e.jsx("div",{className:"mt-4 rounded-xl border border-slate-800 bg-slate-950/60 px-4 py-6 text-sm text-slate-400",children:"No transactions found."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4 space-y-3 md:hidden",children:n.map(t=>e.jsxs("article",{className:"rounded-xl border border-slate-800 bg-slate-950/70 p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-100",children:t.user_name||"Unknown user"}),e.jsx("p",{className:"text-xs text-slate-500",children:t.user_email||"-"})]}),e.jsx(y,{value:t.status})]}),e.jsxs("dl",{className:"mt-3 space-y-1 text-xs text-slate-400",children:[e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsx("dt",{children:"ID"}),e.jsx("dd",{className:"font-mono text-slate-300",children:c(t.id)})]}),e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsx("dt",{children:"Type"}),e.jsx("dd",{className:"uppercase text-slate-200",children:t.type})]}),e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsx("dt",{children:"Currency"}),e.jsxs("dd",{className:"uppercase text-slate-200",children:[t.currency," ",t.network?`(${t.network})`:""]})]}),e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsx("dt",{children:"Amount"}),e.jsx("dd",{className:"text-slate-100",children:b(t.amount)})]}),e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsx("dt",{children:"Submitted"}),e.jsx("dd",{className:"text-slate-300",children:p(t.submitted_at||t.created_at)})]})]}),e.jsx("div",{className:"mt-3",children:e.jsx("button",{type:"button",onClick:()=>u(t.id),className:"rounded-lg border border-cyan-500/60 px-3 py-1.5 text-xs font-semibold text-cyan-200 transition hover:bg-cyan-500/10",children:"Action"})})]},t.id))}),e.jsx("div",{className:"mt-4 hidden overflow-x-auto md:block",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"text-xs uppercase tracking-wide text-slate-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"pb-3 pr-3",children:"User"}),e.jsx("th",{className:"pb-3 pr-3",children:"Type"}),e.jsx("th",{className:"pb-3 pr-3",children:"Currency / Network"}),e.jsx("th",{className:"pb-3 pr-3",children:"Amount"}),e.jsx("th",{className:"pb-3 pr-3",children:"Status"}),e.jsx("th",{className:"pb-3 pr-3",children:"Submitted"}),e.jsx("th",{className:"pb-3",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-800 text-slate-300",children:n.map(t=>e.jsxs("tr",{className:"transition hover:bg-slate-800/30",children:[e.jsxs("td",{className:"py-3 pr-3",children:[e.jsx("p",{className:"font-medium text-slate-100",children:t.user_name||"Unknown user"}),e.jsx("p",{className:"text-xs text-slate-500",children:t.user_email||"-"})]}),e.jsx("td",{className:"py-3 pr-3 uppercase",children:t.type}),e.jsxs("td",{className:"py-3 pr-3 uppercase",children:[t.currency," ",t.network?`(${t.network})`:""]}),e.jsx("td",{className:"py-3 pr-3",children:b(t.amount)}),e.jsx("td",{className:"py-3 pr-3",children:e.jsx(y,{value:t.status})}),e.jsx("td",{className:"py-3 pr-3 text-xs text-slate-400",children:p(t.submitted_at||t.created_at)}),e.jsx("td",{className:"py-3",children:e.jsx("button",{type:"button",onClick:()=>u(t.id),className:"rounded-lg border border-cyan-500/60 px-3 py-1.5 text-xs font-semibold text-cyan-200 transition hover:bg-cyan-500/10",children:"Action"})})]},t.id))})]})})]}),e.jsx(A,{links:m,className:"mt-5"})]}),e.jsx($,{transaction:a,onClose:i,onApprove:N,onDecline:f,onDelete:w})]})}function o({label:s,value:l}){return e.jsxs("article",{className:"rounded-xl border border-slate-800 bg-slate-900/70 p-4",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:s}),e.jsx("p",{className:"mt-2 text-2xl font-semibold text-slate-100",children:l})]})}function y({value:s}){const l=s==="approved"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":s==="rejected"?"border-rose-500/40 bg-rose-500/10 text-rose-200":s==="processing"||s==="payment"||s==="input"||s==="pending"?"border-amber-500/40 bg-amber-500/10 text-amber-200":"border-slate-700 bg-slate-700/20 text-slate-200";return e.jsx("span",{className:`rounded-full border px-2 py-1 text-xs uppercase ${l}`,children:s})}function A({links:s,className:l}){return!s||s.length===0?null:e.jsx("div",{className:`${l} flex flex-wrap gap-2`,children:s.map(r=>e.jsx(v,{href:r.url||"#",preserveState:!0,preserveScroll:!0,className:`rounded-lg border px-3 py-1.5 text-xs transition ${r.active?"border-cyan-400 bg-cyan-500/20 text-cyan-100":r.url?"border-slate-700 text-slate-300 hover:border-cyan-500/40":"cursor-not-allowed border-slate-800 text-slate-600"}`,dangerouslySetInnerHTML:{__html:r.label}},r.label))})}function $({transaction:s,onClose:l,onApprove:r,onDecline:n,onDelete:m}){return s?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-950/80 p-4",children:[e.jsx("button",{type:"button",className:"absolute inset-0",onClick:l,"aria-label":"Close action modal"}),e.jsxs("section",{className:"relative z-10 w-full max-w-xl rounded-2xl border border-slate-700 bg-slate-900 p-5 shadow-2xl",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-slate-100",children:"Transaction Action"}),e.jsx("p",{className:"text-xs text-slate-400",children:c(s.id)})]}),e.jsx("button",{type:"button",onClick:l,className:"rounded-lg border border-slate-700 px-2 py-1 text-xs text-slate-300 transition hover:bg-slate-800",children:"Close"})]}),e.jsxs("dl",{className:"mt-4 grid gap-2 text-sm text-slate-300 sm:grid-cols-2",children:[e.jsx(d,{label:"User",value:s.user_name||"Unknown user"}),e.jsx(d,{label:"Email",value:s.user_email||"-"}),e.jsx(d,{label:"Type",value:(s.type||"-").toUpperCase()}),e.jsx(d,{label:"Currency",value:`${s.currency||"-"}${s.network?` (${s.network})`:""}`}),e.jsx(d,{label:"Amount",value:b(s.amount)}),e.jsx(d,{label:"Status",value:(s.status||"-").toUpperCase()}),e.jsx(d,{label:"Tx Hash",value:S(s.transaction_hash)}),e.jsx(d,{label:"Submitted",value:p(s.submitted_at||s.created_at)}),e.jsx(d,{label:"Processed",value:p(s.processed_at)})]}),e.jsxs("div",{className:"mt-5 flex flex-wrap gap-2",children:[s.has_receipt?e.jsx("a",{href:s.receipt_url,target:"_blank",rel:"noreferrer",className:"rounded-lg bg-blue-600 px-3 py-1.5 text-xs font-semibold text-white transition hover:bg-blue-500",children:"View"}):e.jsx("span",{className:"rounded-lg border border-slate-700 px-3 py-1.5 text-xs text-slate-500",children:"No Receipt"}),e.jsx("button",{type:"button",onClick:r,disabled:!s.can_approve,className:"rounded-lg bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white transition hover:bg-emerald-500 disabled:cursor-not-allowed disabled:bg-slate-700 disabled:text-slate-400",children:"Approve"}),e.jsx("button",{type:"button",onClick:n,disabled:!s.can_decline,className:"rounded-lg bg-amber-500 px-3 py-1.5 text-xs font-semibold text-slate-950 transition hover:bg-amber-400 disabled:cursor-not-allowed disabled:bg-slate-700 disabled:text-slate-400",children:"Decline"}),e.jsx("button",{type:"button",onClick:m,disabled:!s.can_delete,className:"rounded-lg bg-rose-600 px-3 py-1.5 text-xs font-semibold text-white transition hover:bg-rose-500 disabled:cursor-not-allowed disabled:bg-slate-700 disabled:text-slate-400",children:"Delete"})]})]})]}):null}function d({label:s,value:l}){return e.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/70 px-3 py-2",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:s}),e.jsx("p",{className:"mt-1 text-xs text-slate-200",children:l})]})}export{U as default};
